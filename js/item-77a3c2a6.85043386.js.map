{"version":3,"file":"js/item-77a3c2a6.85043386.js","mappings":"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","sources":["webpack://frrid/./src/utils/DataUtils.js","webpack://frrid/./src/utils/DateUtils.js","webpack://frrid/./src/views/ItemView.vue","webpack://frrid/./src/views/ItemView.vue?1409"],"sourcesContent":["import pickBy from \"lodash/pickBy\";\nimport identity from \"lodash/identity\";\n\nexport function identityObject(object) {\n  return pickBy(object, identity);\n}\n","import { DateTime } from \"luxon\";\n\nexport const SHORT_DATE_FORMAT = \"dd.MM.yyyy\";\n\nexport function normalizeDateTime(date) {\n  if (date instanceof Date) {\n    return DateTime.fromJSDate(date).setLocale(\"ru\");\n  }\n\n  if (typeof date === \"string\") {\n    return DateTime.fromISO(date).setLocale(\"ru\");\n  }\n\n  return date.setLocale(\"ru\");\n}\n\nexport function dateToFormat({ date, format = SHORT_DATE_FORMAT }) {\n  if (!date) {\n    return \"\";\n  }\n\n  const dateTime = normalizeDateTime(date);\n\n  return dateTime.toFormat(format);\n}\n","<template>\n  <AppLayout class=\"item-page\">\n    <template v-slot:default>\n      <FormsHeader class=\"item-page__forms-header\" :form-id=\"itemId\" />\n\n      <VTabs\n        :items=\"tabsItems\"\n        :current-tab=\"currentTab\"\n        @change=\"changeCurrentTab\"\n      />\n\n      <transition name=\"item-page__forms\" mode=\"out-in\">\n        <GeneralForm v-if=\"currentTab === 'general'\" />\n        <AuthorsForm\n          @success=\"showSuccess = true\"\n          v-else-if=\"currentTab === 'authors'\"\n        />\n        <ResourcesForm v-else-if=\"currentTab === 'resources'\" />\n        <DatesForm v-else-if=\"currentTab === 'keyDates'\" />\n        <DisclosureForm v-else-if=\"currentTab === 'disclosure'\" />\n        <OrganizationsForm v-else-if=\"currentTab === 'organizations'\" />\n        <TechnologyForm v-else-if=\"currentTab === 'technology'\" />\n\n        <SourceCodeForm\n          v-else-if=\"currentTab === 'source-code' && !isTechType\"\n        />\n      </transition>\n\n      <AddedModal :show=\"showSuccess\" />\n\n      <GeneralPositionModal\n        @submit=\"onSubmit\"\n        :show=\"showGeneralPosition\"\n        @close=\"showGeneralPosition = false\"\n      />\n\n      <CompleteModal :show=\"showComplete\" />\n    </template>\n\n    <template v-slot:footer v-if=\"isEditableStatus\">\n      <ItemPageFooter\n        :complete=\"completed\"\n        @send=\"showGeneralPosition = true\"\n      />\n    </template>\n  </AppLayout>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from \"vuex\";\n\nimport VTabs from \"@/components/tabs/Tabs\";\nimport AppLayout from \"@/components/app/AppLayout\";\nimport DatesForm from \"@/components/forms/DatesForm\";\nimport AddedModal from \"@/components/modals/AddedModal\";\nimport GeneralForm from \"@/components/forms/GeneralForm\";\nimport FormsHeader from \"@/components/forms/FormsHeader\";\nimport AuthorsForm from \"@/components/authors/AuthorsForm\";\nimport CompleteModal from \"@/components/modals/CompleteModal\";\nimport ResourcesForm from \"@/components/resources/ResourcesForm\";\nimport ItemPageFooter from \"@/components/item-page/ItemPageFooter\";\nimport DisclosureForm from \"@/components/disclosure/DisclosureForm\";\nimport TechnologyForm from \"@/components/technology/TechnologyForm\";\nimport GeneralPositionModal from \"@/components/modals/GeneralPositionModal\";\nimport OrganizationsForm from \"@/components/organizations/OrganizationsForm\";\nimport {\n  FORMS_TABS_ITEMS,\n  FormsTabKeys,\n  FormsTabStatus,\n  FormStatus,\n  FormTypes,\n} from \"@/constants/FormConstants\";\nimport SourceCodeForm from \"@/components/technology/SourceCodeForm\";\n\nexport default {\n  name: \"ItemView\",\n  components: {\n    SourceCodeForm,\n    VTabs,\n    DatesForm,\n    AppLayout,\n    AddedModal,\n    AuthorsForm,\n    FormsHeader,\n    GeneralForm,\n    ResourcesForm,\n    CompleteModal,\n    DisclosureForm,\n    TechnologyForm,\n    ItemPageFooter,\n    OrganizationsForm,\n    GeneralPositionModal,\n  },\n  computed: {\n    ...mapGetters(\"formInfo\", [\"getFormType\", \"isEditableStatus\"]),\n    ...mapGetters(\"general\", { generalFormStatus: \"getFormStatus\" }),\n    ...mapGetters(\"authors\", { authorsFormStatus: \"getFormStatus\" }),\n    ...mapGetters(\"dates\", { datesFormStatus: \"getFormStatus\" }),\n    ...mapGetters(\"technology\", { technologyFormStatus: \"getFormStatus\" }),\n    ...mapGetters(\"sourceCode\", { sourceCodeFormStatus: \"getFormStatus\" }),\n    ...mapGetters(\"organizations\", {\n      organizationsFormStatus: \"getFormStatus\",\n    }),\n    ...mapGetters(\"disclosure\", {\n      disclosureFormStatus: \"getFormStatus\",\n    }),\n    ...mapGetters(\"resources\", {\n      resourcesFormStatus: \"getFormStatus\",\n    }),\n    itemId() {\n      const id = Number(this.$route.params.id);\n\n      if (!Number.isNaN(id) && id !== 0) {\n        return id;\n      }\n\n      return FormStatus.Draft;\n    },\n    currentTab() {\n      return this.$route.query.tab || \"general\";\n    },\n    completed() {\n      const successGeneralForm =\n        this.generalFormStatus === FormsTabStatus.Filled;\n      const successAuthorsForm =\n        this.authorsFormStatus === FormsTabStatus.Filled;\n      const successDatesForm = this.datesFormStatus === FormsTabStatus.Filled;\n      const successTechnologyForm =\n        this.technologyFormStatus === FormsTabStatus.Filled;\n      const successOrganizationsForm =\n        this.organizationsFormStatus === FormsTabStatus.Filled;\n      const successDisclosureForm =\n        this.disclosureFormStatus === FormsTabStatus.Filled;\n      const successResourcesForm =\n        this.resourcesFormStatus === FormsTabStatus.Filled;\n      const successSourceCodeForm =\n        this.sourceCodeFormStatus === FormsTabStatus.Filled;\n\n      return (\n        successDatesForm &&\n        successGeneralForm &&\n        successAuthorsForm &&\n        successResourcesForm &&\n        successSourceCodeForm &&\n        successDisclosureForm &&\n        successTechnologyForm &&\n        successOrganizationsForm\n      );\n    },\n    tabStatuses() {\n      return {\n        [FormsTabKeys.KeyDates]: this.datesFormStatus,\n        [FormsTabKeys.General]: this.generalFormStatus,\n        [FormsTabKeys.Authors]: this.authorsFormStatus,\n        [FormsTabKeys.Resources]: this.resourcesFormStatus,\n        [FormsTabKeys.Technology]: this.technologyFormStatus,\n        [FormsTabKeys.Disclosure]: this.disclosureFormStatus,\n        [FormsTabKeys.SourceCode]: this.sourceCodeFormStatus,\n        [FormsTabKeys.Organizations]: this.organizationsFormStatus,\n      };\n    },\n    isTechType() {\n      return this.getFormType === FormTypes.Tech;\n    },\n    tabsItems() {\n      let list = FORMS_TABS_ITEMS.slice();\n\n      if (this.isTechType) {\n        list.pop();\n      }\n\n      return list.map((x) => ({\n        ...x,\n        status: this.tabStatuses[x.key] || FormsTabStatus.NotFilled,\n      }));\n    },\n  },\n  data() {\n    return {\n      showSuccess: false,\n      showComplete: false,\n      showGeneralPosition: false,\n    };\n  },\n  watch: {\n    showSuccess(nextState, prevState) {\n      if (nextState !== prevState) {\n        const timout = setTimeout(() => {\n          this.showSuccess = false;\n\n          clearTimeout(timout);\n        }, 2000);\n      }\n    },\n    isTechType(nextState, prevState) {\n      if (\n        nextState &&\n        !prevState &&\n        this.currentTab === FormsTabKeys.SourceCode\n      ) {\n        this.changeCurrentTab(FormsTabKeys.Technology);\n      }\n    },\n    showComplete(nextState, prevState) {\n      if (nextState && !prevState) {\n        const timout = setTimeout(() => {\n          this.showComplete = false;\n\n          clearTimeout(timout);\n        }, 2000);\n      }\n    },\n  },\n  methods: {\n    ...mapActions(\"authors\", [\"getAuthors\"]),\n    changeCurrentTab(tab) {\n      this.$router.replace({ ...this.$route, query: { tab } });\n    },\n    onSubmit() {\n      this.showGeneralPosition = false;\n      this.showComplete = true;\n    },\n  },\n  mounted() {\n    this.getAuthors();\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"~@/assets/styles/mixins.scss\";\n\n.item-page__forms-header {\n  margin: 19px 0 29px;\n}\n\n.item-page__forms-enter-active,\n.item-page__forms-leave-active {\n  @include transition(opacity);\n}\n\n.item-page__forms-enter-from,\n.item-page__forms-leave-to {\n  opacity: 0;\n}\n</style>\n","import { render } from \"./ItemView.vue?vue&type=template&id=63c42fb4&scoped=true\"\nimport script from \"./ItemView.vue?vue&type=script&lang=js\"\nexport * from \"./ItemView.vue?vue&type=script&lang=js\"\n\nimport \"./ItemView.vue?vue&type=style&index=0&id=63c42fb4&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/victorzimnikov/projects/javascript/frrid/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63c42fb4\"]])\n\nexport default __exports__"],"names":["identityObject","object","pickBy","identity","SHORT_DATE_FORMAT","normalizeDateTime","date","Date","DateTime","setLocale","dateToFormat","format","dateTime","toFormat","_createBlock","_component_AppLayout","class","_createSlots","default","_createVNode","_component_FormsHeader","$options","_component_VTabs","items","onChange","_Transition","name","mode","_component_GeneralForm","key","_component_AuthorsForm","onSuccess","$data","_component_ResourcesForm","_component_DatesForm","_component_DisclosureForm","_component_OrganizationsForm","_component_TechnologyForm","_component_SourceCodeForm","_component_AddedModal","show","_component_GeneralPositionModal","onSubmit","onClose","_component_CompleteModal","_ctx","_component_ItemPageFooter","complete","onSend","components","SourceCodeForm","VTabs","DatesForm","AppLayout","AddedModal","AuthorsForm","FormsHeader","GeneralForm","ResourcesForm","CompleteModal","DisclosureForm","TechnologyForm","ItemPageFooter","OrganizationsForm","GeneralPositionModal","computed","mapGetters","generalFormStatus","authorsFormStatus","datesFormStatus","technologyFormStatus","sourceCodeFormStatus","organizationsFormStatus","disclosureFormStatus","resourcesFormStatus","itemId","id","Number","this","$route","params","isNaN","FormStatus","currentTab","query","tab","completed","successGeneralForm","FormsTabStatus","successAuthorsForm","successDatesForm","successTechnologyForm","successOrganizationsForm","successDisclosureForm","successResourcesForm","successSourceCodeForm","tabStatuses","FormsTabKeys","isTechType","getFormType","FormTypes","tabsItems","list","FORMS_TABS_ITEMS","pop","map","x","status","data","showSuccess","showComplete","showGeneralPosition","watch","nextState","prevState","timout","setTimeout","clearTimeout","changeCurrentTab","methods","mapActions","$router","replace","mounted","getAuthors","__exports__","render"],"sourceRoot":""}