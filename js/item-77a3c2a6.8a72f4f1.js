"use strict";(self["webpackChunkfrrid"]=self["webpackChunkfrrid"]||[]).push([[371],{4976:function(e,t,o){o.d(t,{U:function(){return a}});var r=o(2756),s=o.n(r),n=o(9761),u=o.n(n);function a(e){return s()(e,u())}},3747:function(e,t,o){o.d(t,{HW:function(){return u}});var r=o(8741);const s="dd.MM.yyyy";function n(e){return e instanceof Date?r.ou.fromJSDate(e).setLocale("ru"):"string"===typeof e?r.ou.fromISO(e).setLocale("ru"):e.setLocale("ru")}function u({date:e,format:t=s}){if(!e)return"";const o=n(e);return o.toFormat(t)}},9294:function(e,t,o){function r(e=""){const t=e.trim();if("+"===t||"+7"===t||"+7 ("===t)return t;if("7"===t||"8"===t)return"+7";const o=t.replace(/\D/g,"").slice(0,12),r=o.replace(/\D/g,"").replace(/^\+?([78])?/,"").match(/^(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);if(r){if(r[1]&&!r[2])return`+7 (${r[1]}`;if(r[2]){const e=r.slice(2,5).filter(Boolean).join("-");return`+7 (${r[1]}) ${e}`}return""}return t}function s(e=""){const t=e.trim(),o=t.replace(/\D/g,"").match(/^(\d{0,3})(\d{0,3})$/);return o?[o[1],o[2]&&"-",o[2]].filter(Boolean).join(""):""}o.d(t,{X:function(){return s},Y:function(){return r}})},7787:function(e,t,o){o.r(t),o.d(t,{default:function(){return Z}});var r=o(3396),s=o(9242);function n(e,t,o,n,u,a){const i=(0,r.up)("FormsHeader"),c=(0,r.up)("VTabs"),h=(0,r.up)("GeneralForm"),m=(0,r.up)("AuthorsForm"),l=(0,r.up)("ResourcesForm"),d=(0,r.up)("DatesForm"),p=(0,r.up)("DisclosureForm"),F=(0,r.up)("OrganizationsForm"),S=(0,r.up)("TechnologyForm"),g=(0,r.up)("SourceCodeForm"),f=(0,r.up)("DescriptionForm"),T=(0,r.up)("AddedModal"),y=(0,r.up)("GeneralPositionModal"),w=(0,r.up)("CompleteModal"),b=(0,r.up)("ItemPageFooter"),C=(0,r.up)("AppLayout");return(0,r.wg)(),(0,r.j4)(C,{class:"item-page"},(0,r.Nv)({default:(0,r.w5)((()=>[(0,r.Wm)(i,{class:"item-page__forms-header","form-id":a.itemId},null,8,["form-id"]),(0,r.Wm)(c,{items:a.tabsItems,"current-tab":a.currentTab,onChange:a.changeCurrentTab},null,8,["items","current-tab","onChange"]),(0,r.Wm)(s.uT,{name:"item-page__forms",mode:"out-in"},{default:(0,r.w5)((()=>["general"===a.currentTab?((0,r.wg)(),(0,r.j4)(h,{key:0})):"authors"===a.currentTab?((0,r.wg)(),(0,r.j4)(m,{key:1,onSuccess:t[0]||(t[0]=e=>u.showSuccess=!0)})):"resources"===a.currentTab?((0,r.wg)(),(0,r.j4)(l,{key:2,onSuccess:t[1]||(t[1]=e=>u.showSuccess=!0)})):"keyDates"===a.currentTab?((0,r.wg)(),(0,r.j4)(d,{key:3})):"disclosure"===a.currentTab?((0,r.wg)(),(0,r.j4)(p,{key:4})):"organizations"===a.currentTab?((0,r.wg)(),(0,r.j4)(F,{key:5,onSuccess:t[2]||(t[2]=e=>u.showSuccess=!0)})):"technology"===a.currentTab&&a.isTechType?((0,r.wg)(),(0,r.j4)(S,{key:6})):"source-code"!==a.currentTab||a.isTechType?"description"!==a.currentTab||a.isTechType?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(f,{key:8})):((0,r.wg)(),(0,r.j4)(g,{key:7}))])),_:1}),(0,r.Wm)(T,{show:u.showSuccess},null,8,["show"]),(0,r.Wm)(y,{onSubmit:a.onSubmit,show:u.showGeneralPosition,onClose:t[3]||(t[3]=e=>u.showGeneralPosition=!1)},null,8,["onSubmit","show"]),(0,r.Wm)(w,{show:u.showComplete},null,8,["show"])])),_:2},[e.hasEditForms?{name:"footer",fn:(0,r.w5)((()=>[(0,r.Wm)(b,{complete:a.completed,onSend:t[4]||(t[4]=e=>u.showGeneralPosition=!0)},null,8,["complete"])]))}:void 0]),1024)}var u=o(6623),a=o(1086),i=o(7168),c=o(2026),h=o(7382),m=o(9879),l=o(5518),d=o(3327),p=o(4670),F=o(6111),S=o(8170),g=o(4455),f=o(5672),T=o(132),y=o(6238),w=o(3145),b=o(3017),C=o(1016),L={name:"ItemView",components:{SourceCodeForm:C.Z,DescriptionForm:b.Z,VTabs:a.Z,DatesForm:c.Z,AppLayout:i.Z,AddedModal:h.Z,AuthorsForm:d.Z,FormsHeader:l.Z,GeneralForm:m.Z,ResourcesForm:F.Z,CompleteModal:p.Z,DisclosureForm:g.Z,TechnologyForm:f.Z,ItemPageFooter:S.Z,OrganizationsForm:y.Z,GeneralPositionModal:T.Z},computed:{...(0,u.Se)("i18n",["localize"]),...(0,u.Se)("application",["getToken"]),...(0,u.Se)("formInfo",["getFormType","hasEditForms"]),...(0,u.Se)("general",{generalFormStatus:"getFormStatus"}),...(0,u.Se)("authors",{authorsFormStatus:"getFormStatus"}),...(0,u.Se)("dates",{datesFormStatus:"getFormStatus"}),...(0,u.Se)("technology",{technologyFormStatus:"getFormStatus"}),...(0,u.Se)("description",{descriptionFormStatus:"getFormStatus"}),...(0,u.Se)("organizations",{organizationsFormStatus:"getFormStatus"}),...(0,u.Se)("disclosure",{disclosureFormStatus:"getFormStatus"}),...(0,u.Se)("resources",{resourcesFormStatus:"getFormStatus"}),itemId(){const e=Number(this.$route.params.id);return Number.isNaN(e)||0===e?w.PX.Draft:e},currentTab(){return this.$route.query.tab||"general"},completed(){const e=this.generalFormStatus===w.f1.Filled,t=this.authorsFormStatus===w.f1.Filled,o=this.datesFormStatus===w.f1.Filled,r=this.technologyFormStatus===w.f1.Filled,s=this.organizationsFormStatus===w.f1.Filled,n=this.disclosureFormStatus===w.f1.Filled,u=this.resourcesFormStatus===w.f1.Filled,a=!!this.isTechType||this.descriptionFormStatus===w.f1.Filled;return o&&e&&t&&u&&n&&r&&s&&a},tabStatuses(){return{[w.hL.KeyDates]:this.datesFormStatus,[w.hL.General]:this.generalFormStatus,[w.hL.Authors]:this.authorsFormStatus,[w.hL.Resources]:this.resourcesFormStatus,[w.hL.Technology]:this.technologyFormStatus,[w.hL.Disclosure]:this.disclosureFormStatus,[w.hL.SourceCode]:this.technologyFormStatus,[w.hL.Description]:this.descriptionFormStatus,[w.hL.Organizations]:this.organizationsFormStatus}},isTechType(){return this.getFormType===w.hM.Tech},tabsItems(){let e=w.O8.map((e=>({...e,title:this.localize[e.title].text}))).slice();return this.isTechType?e.splice(w.O8.length-2,2):e.splice(w.O8.length-3,1),e.map((e=>({...e,status:this.tabStatuses[e.key]||w.f1.NotFilled})))}},data(){return{showSuccess:!1,showComplete:!1,showGeneralPosition:!1}},watch:{showSuccess(e,t){if(e!==t){const e=setTimeout((()=>{this.showSuccess=!1,clearTimeout(e)}),2e3)}},isTechType(e,t){e===t||this.currentTab!==w.hL.Description&&this.currentTab!==w.hL.SourceCode?e!==t&&this.currentTab===w.hL.Technology&&this.changeCurrentTab(w.hL.SourceCode):this.changeCurrentTab(w.hL.Technology)},showComplete(e,t){if(e&&!t){const e=setTimeout((()=>{this.showComplete=!1,clearTimeout(e)}),2e3)}}},methods:{...(0,u.nv)("authors",["getAuthors"]),changeCurrentTab(e){this.$router.replace({...this.$route,query:{tab:e}})},onSubmit(){this.showGeneralPosition=!1,this.showComplete=!0}},mounted(){this.getToken||this.$router.replace("/"),this.getAuthors()}},k=o(89);const D=(0,k.Z)(L,[["render",n],["__scopeId","data-v-1daa1544"]]);var Z=D}}]);
//# sourceMappingURL=item-77a3c2a6.8a72f4f1.js.map